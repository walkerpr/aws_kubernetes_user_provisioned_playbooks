---
- name: Install dependencies.
  hosts: localhost
  vars:
    ansible_ssh_private_key_file: "~/.ssh/deployment-{{ deployment_number }}.key"
  tasks:
    - name: Install miscellaneous package dependencies.
      ansible.builtin.include_role:
        name: dependencies
        tasks_from: packages.yml
    - name: Install aws dependencies.
      ansible.builtin.include_role:
        name: dependencies
        tasks_from: aws.yml
    - name: Install ssh dependencies.
      ansible.builtin.include_role:
        name: dependencies
        tasks_from: ssh.yml
    - name: Install docker dependencies.
      ansible.builtin.include_role:
        name: dependencies
        tasks_from: docker.yml
  become: true

- name: Install dependencies (cp).
  hosts: cp
  tasks:
    - name: Install kubernetes dependencies.
      ansible.builtin.include_role:
        name: dependencies
        tasks_from: kubernetes.yml
  become: true
  become_user: root
